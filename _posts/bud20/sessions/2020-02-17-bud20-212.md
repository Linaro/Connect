---
categories:
- bud20
description: Virtio is a framework that specifies how certain class of IO devices
  can be<br>accessed in virtual environments. Virtio devices are typically implemented
  in<br>software, which has a front-end portion that runs in guest OS context and
  a<br>backend portion which runs in a context outside of that guest OS. In case of<br>Type-2
  hypervisor like KVM, backend portion runs in the context of a VMM (Qemu,<br>LKVM
  etc) or in some cases KVM host kenrel itself. In case of Type-1 hypervisors<br>like
  Xen or ACRN, backend runs in the context of another guest OS.<br><br>A crucial aspect
  of Virtio is memory access provided for backends. Typically<br>backends have read/write
  access to complete guest OS memory that is hosting the<br>front-end counterpart.
  Such wholesale access to memory is not desirable when a<br>guest OS is running security-sensitive
  applications. It is desireable to<br>restrict access for backend only to the regions
  required. How can that be best<br>accomplished while still adhering to the Virtio
  specification?<br><br>This discussion is based on Qualcomm's efforts to implement
  virtio for a Linux<br>guest OS running on a Type-1 hypervisor. Frontend and backend
  portions of virtio<br>run in separate guest OS contexts. A very small portion of
  memory is shared<br>between the two guest OS. We present the changes done to virtio
  front-end<br>drivers to accomodate the memory-access limitations for backends. A
  further<br>limitation addressed is lack of support in hypervisor to trap virtio
  config<br>space access and have that be handled in backend. Instead suitable changes
  are<br>discussed how virtio-mmio transport can accommodate a message passing mechanism.<br>Finally
  we present the need for a new backend implementation that is hypervisor<br>agnostic
  and can handle various limitations presented by different hypervisors.
image:
  featured: 'true'
  path: https://static.linaro.org/connect/bud20/images/BUD20-212.png
session_id: BUD20-212
session_speakers:
- speaker_bio: Srivatsa Vaddagiri works as Principal Engineer at Qualcomm Innovation
    Center in<br /> Bangalore, India. He has over 20 years of experience working with
    various Unix<br /> kernels, including AIX and Linux. His Linux kernel contributions
    include cpu<br /> hotplug support and cgroup-aware extensions to CPU scheduler.
    At Qualcomm,<br /> Srivatsa's focus includes improving Linux kernel used in automotive
    products and<br /> virtio development on a Type-1 hypervisor. Srivatsa holds a
    MS degree in<br /> Software systems from BITS, Pilani.<br />
  speaker_company: ''
  speaker_image: http://avatars.sched.co/0/68/10468696/avatar.jpg.320x320px.jpg?288
  speaker_name: Srivatsa Vaddagiri
  speaker_position: Qualcomm, Principal Engineer
  speaker_role: attendee, speaker
session_track: Linux Kernel
tag: session
tags: Linux Kernel
title: BUD20-212 - BUD20-212 Virtio on Type-1 hypervisors
---