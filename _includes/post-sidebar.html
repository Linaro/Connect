{% comment %}
    Recent Posts Displayed here.
{% endcomment %}
<div class="col-xs-12 col-sm-6 no-padding">

<div class="panel panel-primary" class="blog-sidebar">
    <div class="panel-heading">
      <h3 class="panel-title text-center">Recent Posts</h3>
    </div>
    <div class="panel-body">
        {% for post in site.posts limit: 3 %}
            {% assign timeframe = 604800 %}
            {% assign post_in_seconds = post.date | date: "%s" | plus: 0 %}
            {% assign recent_posts = "now" | date: "%s" | minus: timeframe %}
            <a href="{{post.url}}">
                <div class="row featured_blog_post">
                    <div class="col-md-3 col-sm-3 col-xs-3 no-padding">
                            {% if post.image.thumb %}
                                    {% capture image_path %}{{site.blog_images_dir}}thumbs/{{post.image.thumb}}{% endcapture %}
                                    {% capture full_path %}/{{site.blog_images_dir}}thumbs/{{post.image.thumb}}{% endcapture %}
                                    {% responsive_image_block %}
                                    template: _includes/thumb.html
                                    path: {{ image_path }}
                                    fullpath: {{ full_path }}
                                    {% if post.title %}
                                    title: {{ post.title | slugify: "ascii"}}
                                    alt: {{ post.title | slugify: "ascii"}}
                                    {% endif %}
                                    {% endresponsive_image_block %}
                             {% elsif post.image.name %}
                                    {% capture image_path %}{{site.blog_images_dir}}{{post.image.name}}{% endcapture %}
                                    {% capture full_path %}/{{site.blog_images_dir}}{{post.image.name}}{% endcapture %}
                                    {% responsive_image_block %}
                                    template: _includes/thumb.html
                                    path: {{ image_path }}
                                    fullpath: {{ full_path }}
                                    {% if post.title %}
                                    title: {{ post.title | slugify: "ascii"}}
                                    alt: {{ post.title | slugify: "ascii"}}
                                    {% endif %}
                                    {% endresponsive_image_block %}
                            {% elsif post.image.path contains "https://" %}
                                <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                                data-src="https://static.linaro.org/connect/{{post.categories[0] | downcase }}/images/300/{{post.session_id}}.jpg"
                                    alt="{{post.title}}" class="center-block img-responsive lazyload" />
                                <!-- <picture>
                                    <source media="(max-width: 400px)"
                                     data-srcset="https://static.linaro.org/connect/bud20/images/400/{{post.session_id}}.jpg">
                                    <source media="(max-width: 800px)"
                                     data-srcset="https://static.linaro.org/connect/bud20/images/800/{{post.session_id}}.jpg">
                                    <source media="(max-width: 00px)"
                                     data-srcset="https://static.linaro.org/connect/bud20/images/{{post.session_id}}.png">
                                    <img src="https://static.linaro.org/connect/bud20/images/{{post.session_id}}.png"
                                    class="img-responsive lazyload">
                                </picture> -->
                            {% elsif post.image.path %}
                                    {% unless post.image.path contains "https://" %}
                                        {% capture image_path %}{{post.image.path | remove_first: '/'}}{% endcapture %}
                                        {% capture full_path %}{{post.image.path }}{% endcapture %}
                                        {% responsive_image_block %}
                                        template: _includes/thumb.html
                                        path: {{ image_path }}
                                        fullpath: {{ full_path }}
                                        {% if post.title %}
                                        title: {{ post.title | slugify: "ascii"}}
                                        alt: {{ post.title | slugify: "ascii"}}
                                        {% endif %}
                                        {% endresponsive_image_block %}
                                    {% endunless %}
                            {% elsif post.image == site.data.settings.social_share_image %}
                                <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="{{site.data.settings.placeholder}}"
                                    alt="{{post.title}}" class="center-block img-responsive lazyload" />
                            {% elsif post.image %}
                                    {% capture image_path %}{{post.image | remove_first: '/'}}{% endcapture %}
                                    {% capture full_path %}{{post.image }}{% endcapture %}
                                    {% responsive_image_block %}
                                    template: _includes/thumb.html
                                    path: {{ image_path }}
                                    fullpath: {{ full_path }}
                                    {% if post.title %}
                                    title: {{ post.title | slugify: "ascii"}}
                                    alt: {{ post.title | slugify: "ascii"}}
                                    {% endif %}
                                    {% endresponsive_image_block %}
                             {% else %}
                                <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                                 data-src="{{site.data.settings.placeholder}}" alt="{{post.title}}" class="img-responsive lazyload"/>
                             {% endif %}
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-9 ">
                       {{post.title | truncate: 40}}
                       <br />
                       <small>
                           <em>{{post.date | date: "%A, %B %-d, %Y" }}</em>
                            {% if post_in_seconds > recent_posts %}
                                <span class="new-post" title="Post added in the last week.">New</span>
                            {% endif %}
                        </small>
                   </div>
                </div>
            </a>
        {% endfor %}
    </div>
</div>
</div>
{% comment %}
    Other Posts
{% endcomment %}
<div class="col-xs-12 col-sm-6 no-padding">

<div class="panel panel-primary" class="blog-sidebar">
    <div class="panel-heading">
      <h3 class="panel-title text-center">Other Posts</h3>
    </div>
    <div class="panel-body">
        {% assign posts = site.posts | sample:5 %}
        {% for post in posts %}
            {% assign timeframe = 604800 %}
            {% assign post_in_seconds = post.date | date: "%s" | plus: 0 %}
            {% assign recent_posts = "now" | date: "%s" | minus: timeframe %}
        <a href="{{post.url}}">
            <div class="row featured_blog_post">
                <div class="col-md-3 col-sm-3 col-xs-3 no-padding">
                    {% if post.image.thumb %}
                        {% capture image_path %}{{site.blog_images_dir}}thumbs/{{post.image.thumb}}{% endcapture %}
                        {% capture full_path %}/{{site.blog_images_dir}}thumbs/{{post.image.thumb}}{% endcapture %}
                        {% responsive_image_block %}
                        template: _includes/thumb.html
                        path: {{ image_path }}
                        fullpath: {{ full_path }}
                        {% if post.title %}
                        title: {{ post.title | slugify: "ascii"}}
                        alt: {{ post.title | slugify: "ascii"}}
                        {% endif %}
                        {% endresponsive_image_block %}
                 {% elsif post.image.name %}
                        {% capture image_path %}{{site.blog_images_dir}}{{post.image.name}}{% endcapture %}
                        {% capture full_path %}/{{site.blog_images_dir}}{{post.image.name}}{% endcapture %}
                        {% responsive_image_block %}
                        template: _includes/thumb.html
                        path: {{ image_path }}
                        fullpath: {{ full_path }}
                        {% if post.title %}
                        title: {{ post.title | slugify: "ascii"}}
                        alt: {{ post.title | slugify: "ascii"}}
                        {% endif %}
                        {% endresponsive_image_block %}
                {% elsif post.image.path contains "https://" %}
                <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                    data-src="https://static.linaro.org/connect/{{post.categories[0] | downcase }}/images/300/{{post.session_id}}.jpg"
                    alt="{{post.title}}" class="center-block img-responsive lazyload" />
                {% elsif post.image.path %}
                        {% unless post.image.path contains "https://" %}
                            {% capture image_path %}{{post.image.path | remove_first: '/'}}{% endcapture %}
                            {% capture full_path %}{{post.image.path }}{% endcapture %}
                            {% responsive_image_block %}
                            template: _includes/thumb.html
                            path: {{ image_path }}
                            fullpath: {{ full_path }}
                            {% if post.title %}
                            title: {{ post.title | slugify: "ascii"}}
                            alt: {{ post.title | slugify: "ascii"}}
                            {% endif %}
                            {% endresponsive_image_block %}
                        {% endunless %}
                {% elsif post.image == site.data.settings.social_share_image %}
                    <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="{{site.data.settings.placeholder}}"
                        alt="{{post.title}}" class="center-block img-responsive lazyload" />
                 {% elsif post.image %}
                        {% capture image_path %}{{post.image | remove_first: '/' }}{% endcapture %}
                        {% capture full_path %}{{post.image }}{% endcapture %}
                        {% responsive_image_block %}
                        template: _includes/thumb.html
                        path: {{ image_path }}
                        fullpath: {{ full_path }}
                        {% if post.title %}
                        title: {{ post.title | slugify: "ascii"}}
                        alt: {{ post.title | slugify: "ascii"}}
                        {% endif %}
                        {% endresponsive_image_block %}
                 {% else %}
                    <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
                    data-src="{{site.data.settings.placeholder}}" alt="{{post.title}}" class="img-responsive lazyload"/>
                 {% endif %}
                </div>
                <div class="col-md-9 col-sm-9 col-xs-9 ">
                   {{post.title | truncate: 40}}
                   <br />
                   <small>
                       <em>{{post.date | date: "%A, %B %-d, %Y" }}</em>
                        {% if post_in_seconds > recent_posts %}
                            <span class="new-post" title="Post added in the last week.">New</span>
                        {% endif %}
                    </small>
               </div>
            </div>
            </a>
        {% endfor %}
    </div>
</div>
</div>
{% if site.data.settings.blog.sidebar.custom-include %}
{% include {{site.data.settings.blog.sidebar.custom-include}} %}
{% endif %}
